================================================================================
cfws2
================================================================================
References:     <testabcd.1@silly.test> (apa)

--------------------------------------------------------------------------------

(message
  (headers
    (ref
      (midkind
        (references))
      (references_field
        (msg_id
          (cfws
            (fws
              (wsp)))
          (dotatom_text
            (atom)
            (atom))
          (dotatom_text
            (atom)
            (atom))
          (cfws
            (fws
              (wsp))
            (comment)))))))

================================================================================
Refereces
================================================================================
References: <testabcd.1@silly.test> <testabcd.2@silly.test>
  <testabcd.3@silly.test> <testabcd.4@silly.test>

--------------------------------------------------------------------------------

(message
  (headers
    (ref
      (midkind
        (references))
      (references_field
        (msg_id
          (cfws
            (fws
              (wsp)))
          (dotatom_text
            (atom)
            (atom))
          (dotatom_text
            (atom)
            (atom)))
        (msg_id
          (cfws
            (fws
              (wsp)))
          (dotatom_text
            (atom)
            (atom))
          (dotatom_text
            (atom)
            (atom)))
        (msg_id
          (cfws
            (fws
              (line_break)
              (wsp)))
          (dotatom_text
            (atom)
            (atom))
          (dotatom_text
            (atom)
            (atom)))
        (msg_id
          (cfws
            (fws
              (wsp)))
          (dotatom_text
            (atom)
            (atom))
          (dotatom_text
            (atom)
            (atom)))))))

================================================================================
Message-ID
================================================================================
Message-ID: <testabcd.1234@silly.test> (aeuaoeu)

--------------------------------------------------------------------------------

(message
  (headers
    (midheader
      (message_id)
      (message_idfield
        (msg_id
          (cfws
            (fws
              (wsp)))
          (dotatom_text
            (atom)
            (atom))
          (dotatom_text
            (atom)
            (atom))
          (cfws
            (fws
              (wsp))
            (comment)))))))

================================================================================
Multiname
================================================================================
Date: Thu,
	 13
	   Feb
		 1969
	 23:32
			  -0330

--------------------------------------------------------------------------------

(message
  (headers
    (dateheader
      (date)
      (date_time
        (day_of_week
          (fws
            (wsp))
          (day_name))
        (datefield
          (day
            (fws
              (line_break)
              (wsp))
            (fws
              (line_break)
              (wsp)))
          (month)
          (year
            (fws
              (line_break)
              (wsp))
            (fws
              (line_break)
              (wsp))))
        (time
          (time_of_day
            (hour)
            (minute))
          (zone
            (fws
              (line_break)
              (wsp))))))))

================================================================================
Addr-Spec
================================================================================
To: mailinglist-dev-public-request@lists.devstuff.org,
  mailinglist-dev-public-request@lists.devstuff.org

--------------------------------------------------------------------------------

(message
  (headers
    (addressheader
      (addrkind
        (to))
      (addresslist
        (internetaddress
          (mailbox
            (fws
              (wsp))
            (addrspec
              (local
                (dotatom
                  (dotatom_text
                    (atom))))
              (domain
                (dotatom
                  (dotatom_text
                    (atom)
                    (atom)
                    (atom)))))))
        (internetaddress
          (mailbox
            (fws
              (line_break)
              (wsp))
            (addrspec
              (local
                (dotatom
                  (dotatom_text
                    (atom))))
              (domain
                (dotatom
                  (dotatom_text
                    (atom)
                    (atom)
                    (atom)))))))))))

================================================================================
Multiname
================================================================================
To: apa cepa <mailinglist-dev-public-request@lists.devstuff.org>

--------------------------------------------------------------------------------

(message
  (headers
    (addressheader
      (addrkind
        (to))
      (addresslist
        (internetaddress
          (mailbox
            (fws
              (wsp))
            (phrase
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp)))))
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp))))))
            (angle_addr
              (addrspec
                (local
                  (dotatom
                    (dotatom_text
                      (atom))))
                (domain
                  (dotatom
                    (dotatom_text
                      (atom)
                      (atom)
                      (atom))))))))))))

================================================================================
None-group
================================================================================
To: apa cepa <mailinglist-dev-public-request@lists.devstuff.org>,
  apa cepa <mailinglist-dev-public-request@lists.devstuff.org>,
  bepa@xyz.com

--------------------------------------------------------------------------------

(message
  (headers
    (addressheader
      (addrkind
        (to))
      (addresslist
        (internetaddress
          (mailbox
            (fws
              (wsp))
            (phrase
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp)))))
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp))))))
            (angle_addr
              (addrspec
                (local
                  (dotatom
                    (dotatom_text
                      (atom))))
                (domain
                  (dotatom
                    (dotatom_text
                      (atom)
                      (atom)
                      (atom))))))))
        (internetaddress
          (mailbox
            (fws
              (line_break)
              (wsp))
            (phrase
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp)))))
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp))))))
            (angle_addr
              (addrspec
                (local
                  (dotatom
                    (dotatom_text
                      (atom))))
                (domain
                  (dotatom
                    (dotatom_text
                      (atom)
                      (atom)
                      (atom))))))))
        (internetaddress
          (mailbox
            (fws
              (line_break)
              (wsp))
            (addrspec
              (local
                (dotatom
                  (dotatom_text
                    (atom))))
              (domain
                (dotatom
                  (dotatom_text
                    (atom)
                    (atom)))))))))))

================================================================================
Multigroup
================================================================================
To: Omp cutie: apa bep cepa <mailinglist-dev-public-request@lists.devstuff.org> ;

--------------------------------------------------------------------------------

(message
  (headers
    (addressheader
      (addrkind
        (to))
      (addresslist
        (internetaddress
          (mailgroup
            (fws
              (wsp))
            (phrase
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp)))))
              (word
                (atom2
                  (atom))))
            (group_list
              (mailbox_list
                (mailbox
                  (fws
                    (wsp))
                  (phrase
                    (word
                      (atom2
                        (atom)
                        (cfws
                          (fws
                            (wsp)))))
                    (word
                      (atom2
                        (atom)
                        (cfws
                          (fws
                            (wsp)))))
                    (word
                      (atom2
                        (atom)
                        (cfws
                          (fws
                            (wsp))))))
                  (angle_addr
                    (addrspec
                      (local
                        (dotatom
                          (dotatom_text
                            (atom))))
                      (domain
                        (dotatom
                          (dotatom_text
                            (atom)
                            (atom)
                            (atom)))))
                    (cfws
                      (fws
                        (wsp)))))))))))))

================================================================================
Empty group
================================================================================
To: Omp cutie: ;

--------------------------------------------------------------------------------

(message
  (headers
    (addressheader
      (addrkind
        (to))
      (addresslist
        (internetaddress
          (mailgroup
            (fws
              (wsp))
            (phrase
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp)))))
              (word
                (atom2
                  (atom))))
            (fws
              (wsp))))))))

================================================================================
Nested comments
================================================================================
To: Apa <(apa \(eau\) cxpa)tist@test.com>

--------------------------------------------------------------------------------

(message
  (headers
    (addressheader
      (addrkind
        (to))
      (addresslist
        (internetaddress
          (mailbox
            (fws
              (wsp))
            (phrase
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp))))))
            (angle_addr
              (addrspec
                (local
                  (dotatom
                    (cfws
                      (comment))
                    (dotatom_text
                      (atom))))
                (domain
                  (dotatom
                    (dotatom_text
                      (atom)
                      (atom))))))))))))

================================================================================
Empty group
================================================================================
To: Per ( aou \))<xyz@baeou.com>

--------------------------------------------------------------------------------

(message
  (headers
    (addressheader
      (addrkind
        (to))
      (addresslist
        (internetaddress
          (mailbox
            (fws
              (wsp))
            (phrase
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp))
                    (comment)))))
            (angle_addr
              (addrspec
                (local
                  (dotatom
                    (dotatom_text
                      (atom))))
                (domain
                  (dotatom
                    (dotatom_text
                      (atom)
                      (atom))))))))))))

================================================================================
Headers
================================================================================
From: "a
 b
 c x" 
 <mailinglist-dev-public-request@lists.devstuff.org>
To: test@test.net, bepa@nepa.com, argo <cargo@hhh.rri>, bepa: apa@bepa.com ;
To: apa bep cepa <mailinglist-dev-public-request@lists.devstuff.org>
Subject: confirm a07bec5da9a9c86cfe34e4984e6713267d1bf9c4
Reply-To: mailinglist-dev-public-request@lists.devstuff.org
Auto-Submitted: auto-generated
Message-ID: <mailman.0.1638739154.32027.mailinglist-dev-public@lists.devstuff.org>
Date: Sun, 05 Dec 2021 21:19:14 +0000
Precedence: bulk
X-BeenThere: mailinglist-dev-public@lists.devstuff.org
X-Mailman-Version: 2.1.38
List-Id: Public mailing list for devstuff development <mailinglist-dev-public.lists.devstuff.org>
X-List-Administrivia: yes
Errors-To: mailinglist-dev-public-bounces@lists.devstuff.org
Sender: "mailinglist-dev-public" <mailinglist-dev-public-bounces@lists.devstuff.org>

--------------------------------------------------------------------------------

(message
  (headers
    (addressheader
      (addrkind
        (from))
      (addresslist
        (internetaddress
          (mailbox
            (fws
              (wsp))
            (phrase
              (word
                (quoted_string
                  (fws
                    (line_break)
                    (wsp))
                  (fws
                    (line_break)
                    (wsp))))
              (cfws
                (fws
                  (wsp)
                  (line_break)
                  (wsp))))
            (angle_addr
              (addrspec
                (local
                  (dotatom
                    (dotatom_text
                      (atom))))
                (domain
                  (dotatom
                    (dotatom_text
                      (atom)
                      (atom)
                      (atom))))))))))
    (addressheader
      (addrkind
        (to))
      (addresslist
        (internetaddress
          (mailbox
            (fws
              (wsp))
            (addrspec
              (local
                (dotatom
                  (dotatom_text
                    (atom))))
              (domain
                (dotatom
                  (dotatom_text
                    (atom)
                    (atom)))))))
        (internetaddress
          (mailbox
            (fws
              (wsp))
            (addrspec
              (local
                (dotatom
                  (dotatom_text
                    (atom))))
              (domain
                (dotatom
                  (dotatom_text
                    (atom)
                    (atom)))))))
        (internetaddress
          (mailbox
            (fws
              (wsp))
            (phrase
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp))))))
            (angle_addr
              (addrspec
                (local
                  (dotatom
                    (dotatom_text
                      (atom))))
                (domain
                  (dotatom
                    (dotatom_text
                      (atom)
                      (atom))))))))
        (internetaddress
          (mailgroup
            (fws
              (wsp))
            (phrase
              (word
                (atom2
                  (atom))))
            (group_list
              (mailbox_list
                (mailbox
                  (fws
                    (wsp))
                  (addrspec
                    (local
                      (dotatom
                        (dotatom_text
                          (atom))))
                    (domain
                      (dotatom
                        (dotatom_text
                          (atom)
                          (atom))
                        (cfws
                          (fws
                            (wsp)))))))))))))
    (addressheader
      (addrkind
        (to))
      (addresslist
        (internetaddress
          (mailbox
            (fws
              (wsp))
            (phrase
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp)))))
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp)))))
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp))))))
            (angle_addr
              (addrspec
                (local
                  (dotatom
                    (dotatom_text
                      (atom))))
                (domain
                  (dotatom
                    (dotatom_text
                      (atom)
                      (atom)
                      (atom))))))))))
    (subjectheader
      (subject)
      (subjectfield
        (fws
          (wsp))))
    (addressheader
      (addrkind
        (replyto))
      (addresslist
        (internetaddress
          (mailbox
            (fws
              (wsp))
            (addrspec
              (local
                (dotatom
                  (dotatom_text
                    (atom))))
              (domain
                (dotatom
                  (dotatom_text
                    (atom)
                    (atom)
                    (atom)))))))))
    (header
      (headertype)
      (headerentry
        (fws
          (wsp))))
    (midheader
      (message_id)
      (message_idfield
        (msg_id
          (cfws
            (fws
              (wsp)))
          (dotatom_text
            (atom)
            (atom)
            (atom)
            (atom)
            (atom))
          (dotatom_text
            (atom)
            (atom)
            (atom)))))
    (dateheader
      (date)
      (date_time
        (day_of_week
          (fws
            (wsp))
          (day_name))
        (datefield
          (day
            (fws
              (wsp))
            (fws
              (wsp)))
          (month)
          (year
            (fws
              (wsp))
            (fws
              (wsp))))
        (time
          (time_of_day
            (hour)
            (minute)
            (second))
          (zone
            (fws
              (wsp))))))
    (header
      (headertype)
      (headerentry
        (fws
          (wsp))))
    (header
      (headertype)
      (headerentry
        (fws
          (wsp))))
    (header
      (headertype)
      (headerentry
        (fws
          (wsp))))
    (header
      (headertype)
      (headerentry
        (fws
          (wsp))))
    (header
      (headertype)
      (headerentry
        (fws
          (wsp))))
    (header
      (headertype)
      (headerentry
        (fws
          (wsp))))
    (addressheader
      (addrkind
        (sender))
      (addresslist
        (internetaddress
          (mailbox
            (fws
              (wsp))
            (phrase
              (word
                (quoted_string))
              (cfws
                (fws
                  (wsp))))
            (angle_addr
              (addrspec
                (local
                  (dotatom
                    (dotatom_text
                      (atom))))
                (domain
                  (dotatom
                    (dotatom_text
                      (atom)
                      (atom)
                      (atom))))))))))))

================================================================================
A weird field
================================================================================
To:A Group(Some people) :Chris Jones <c@(Chris's host.)public.example> ;

--------------------------------------------------------------------------------

(message
  (headers
    (addressheader
      (addrkind
        (to))
      (addresslist
        (internetaddress
          (mailgroup
            (phrase
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp)))))
              (word
                (atom2
                  (atom)
                  (cfws
                    (comment)
                    (fws
                      (wsp))))))
            (group_list
              (mailbox_list
                (mailbox
                  (phrase
                    (word
                      (atom2
                        (atom)
                        (cfws
                          (fws
                            (wsp)))))
                    (word
                      (atom2
                        (atom)
                        (cfws
                          (fws
                            (wsp))))))
                  (angle_addr
                    (addrspec
                      (local
                        (dotatom
                          (dotatom_text
                            (atom))))
                      (domain
                        (dotatom
                          (cfws
                            (comment))
                          (dotatom_text
                            (atom)
                            (atom)))))
                    (cfws
                      (fws
                        (wsp)))))))))))))

================================================================================
Lots of spaces
================================================================================
Message-ID:              <testabcd.1234@silly.test>

--------------------------------------------------------------------------------

(message
  (headers
    (midheader
      (message_id)
      (message_idfield
        (msg_id
          (cfws
            (fws
              (wsp)))
          (dotatom_text
            (atom)
            (atom))
          (dotatom_text
            (atom)
            (atom)))))))

================================================================================
Lots of comments
================================================================================
From: Pete(A nice \) chap) <pete(his account)@silly.test(his host)>
To:A Group(Some people) :Chris Jones <c@(Chris's host.)public.example>,
		joe@example.org,
 John <jdoe@one.test> (my dear friend); (the end of the group)
Cc:(Empty list)(start)Hidden recipients  : ; (apa (cepa) bepa)
Date: Thu,
	 13
	   Feb
		 1969
	 23:32
			  -0330 (Newfoundland Time)
Message-ID:              <testabcd.1234@silly.test>

Testing.
--------------------------------------------------------------------------------

(message
  (headers
    (addressheader
      (addrkind
        (from))
      (addresslist
        (internetaddress
          (mailbox
            (fws
              (wsp))
            (phrase
              (word
                (atom2
                  (atom)
                  (cfws
                    (comment)
                    (fws
                      (wsp))))))
            (angle_addr
              (addrspec
                (local
                  (dotatom
                    (dotatom_text
                      (atom))
                    (cfws
                      (comment))))
                (domain
                  (dotatom
                    (dotatom_text
                      (atom)
                      (atom))
                    (cfws
                      (comment))))))))))
    (addressheader
      (addrkind
        (to))
      (addresslist
        (internetaddress
          (mailgroup
            (phrase
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp)))))
              (word
                (atom2
                  (atom)
                  (cfws
                    (comment)
                    (fws
                      (wsp))))))
            (group_list
              (mailbox_list
                (mailbox
                  (phrase
                    (word
                      (atom2
                        (atom)
                        (cfws
                          (fws
                            (wsp)))))
                    (word
                      (atom2
                        (atom)
                        (cfws
                          (fws
                            (wsp))))))
                  (angle_addr
                    (addrspec
                      (local
                        (dotatom
                          (dotatom_text
                            (atom))))
                      (domain
                        (dotatom
                          (cfws
                            (comment))
                          (dotatom_text
                            (atom)
                            (atom)))))))
                (mailbox
                  (fws
                    (line_break)
                    (wsp))
                  (addrspec
                    (local
                      (dotatom
                        (dotatom_text
                          (atom))))
                    (domain
                      (dotatom
                        (dotatom_text
                          (atom)
                          (atom))))))
                (mailbox
                  (fws
                    (line_break)
                    (wsp))
                  (phrase
                    (word
                      (atom2
                        (atom)
                        (cfws
                          (fws
                            (wsp))))))
                  (angle_addr
                    (addrspec
                      (local
                        (dotatom
                          (dotatom_text
                            (atom))))
                      (domain
                        (dotatom
                          (dotatom_text
                            (atom)
                            (atom)))))
                    (cfws
                      (fws
                        (wsp))
                      (comment))))))
            (cfws
              (fws
                (wsp))
              (comment))))))
    (addressheader
      (addrkind
        (cc))
      (addresslist
        (internetaddress
          (mailgroup
            (phrase
              (word
                (atom2
                  (cfws
                    (comment)
                    (comment))
                  (atom)
                  (cfws
                    (fws
                      (wsp)))))
              (word
                (atom2
                  (atom)
                  (cfws
                    (fws
                      (wsp))))))
            (fws
              (wsp))
            (cfws
              (fws
                (wsp))
              (comment
                (comment)))))))
    (dateheader
      (date)
      (date_time
        (day_of_week
          (fws
            (wsp))
          (day_name))
        (datefield
          (day
            (fws
              (line_break)
              (wsp))
            (fws
              (line_break)
              (wsp)))
          (month)
          (year
            (fws
              (line_break)
              (wsp))
            (fws
              (line_break)
              (wsp))))
        (time
          (time_of_day
            (hour)
            (minute))
          (zone
            (fws
              (line_break)
              (wsp))))
        (cfws
          (fws
            (wsp))
          (comment))))
    (midheader
      (message_id)
      (message_idfield
        (msg_id
          (cfws
            (fws
              (wsp)))
          (dotatom_text
            (atom)
            (atom))
          (dotatom_text
            (atom)
            (atom))))))
  (emailbody
    (blocks
      (block
        (line)))))

================================================================================
Bad-fold-no-indent
================================================================================
From: <mailinglist-dev-public-request@lists.devstuff.org>
To: test@test.net
Subject: confirm
a07bec5da9a9c86cfe34e4984e6713267d1bf9c4

--------------------------------------------------------------------------------

(ERROR
  (addressheader
    (addrkind
      (from))
    (addresslist
      (internetaddress
        (mailbox
          (fws
            (wsp))
          (angle_addr
            (addrspec
              (local
                (dotatom
                  (dotatom_text
                    (atom))))
              (domain
                (dotatom
                  (dotatom_text
                    (atom)
                    (atom)
                    (atom))))))))))
  (addressheader
    (addrkind
      (to))
    (addresslist
      (internetaddress
        (mailbox
          (fws
            (wsp))
          (addrspec
            (local
              (dotatom
                (dotatom_text
                  (atom))))
            (domain
              (dotatom
                (dotatom_text
                  (atom)
                  (atom)))))))))
  (subjectheader
    (subject)
    (subjectfield
      (fws
        (wsp))))
  (headertype))
